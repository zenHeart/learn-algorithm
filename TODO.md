# 算法学习平台 - 开发计划

## 📊 当前进度概览

**🎯 总体进度**: P0 阶段 - **100%** 完成 (19/19 个任务已完成)

| 模块 | 进度 | 状态 |
|------|------|------|
| 📁 项目基础架构 | 100% | ✅ 完成 |
| 🏗️ 站点配置系统 | 100% | ✅ 完成 |
| 📄 基础 MDX 处理 | 100% | ✅ 完成 |
| 🎨 基础 UI 组件 + 优化 | 100% | ✅ 完成 |
| 📚 内容管理系统 | 100% | ✅ 完成 |
| 📱 响应式布局 + 移动端 | 100% | ✅ 完成 |
| 🚀 静态部署配置 | 100% | ✅ **完成** |

## 🎉 P0 阶段完成总结

**恭喜！P0 (MVP 核心功能) 阶段已 100% 完成！**

✅ **已实现的核心功能**：

- 完整的现代化技术栈 (React 19 + Vite 7 + TypeScript 5.5)
- 自动化内容管理和导航生成系统
- 智能侧边栏扁平化算法
- 完善的 MDX 文档渲染支持
- 响应式设计和移动端适配
- 主题系统 (明暗模式切换)
- 固定头部导航和优化的布局体验

🎯 **当前平台功能**：

- 📱 **完全响应式**: 支持桌面、平板、手机所有设备
- 🎨 **主题切换**: 流畅的明暗模式切换体验
- 📚 **智能导航**: 自动生成目录结构，单文件自动扁平化
- 📄 **MDX 渲染**: 支持 Markdown + React 组件混合内容
- 🔧 **类型安全**: 全栈 TypeScript 开发体验

**下一步**: 可以开始 P1 阶段开发，实现交互式代码编辑和基础可视化功能。

---

## 📋 项目概述

基于 [requirement.md](./requirement.md) 的技术需求，按照 MVP 开发模式将项目拆分为 4 个优先级阶段，确保每个阶段都能独立验证和部署。

## 🎯 里程碑规划

| 里程碑 | 优先级 | 预计时间 | 主要目标 | 验收标准 | 进度 |
|--------|--------|----------|----------|----------|------|
| **Alpha 版本** | P0 | 4 周 | 基础站点框架 + 静态部署 | 能访问并浏览文档内容 | 🟡 **50%** |
| **Beta 版本** | P1 | 6 周 | 交互式代码编辑 + 基础可视化 | 能运行代码和展示可视化 | ⚪ **0%** |
| **RC 版本** | P2 | 4 周 | 完整功能 + Playground | 完整的用户体验 | ⚪ **0%** |
| **正式版本** | P3 | 2 周 | 性能优化 + 移动端适配 | 生产环境可用 | ⚪ **0%** |

---

## 🚀 P0 - MVP 核心功能 (Alpha 版本)

> **目标**: 实现基础的文档站点，支持静态部署和基本的内容浏览

### 📁 1. 项目基础架构

#### 1.1 项目初始化

- [x] **初始化项目结构** (1天) ✅ **已完成**
  - [x] 创建基础目录结构 (参考 [requirement.md](./requirement.md) 项目结构规范)
  - [x] 配置 package.json 和依赖包 (React 19, Vite 7, TypeScript 5.5)
  - [x] 设置 TypeScript 配置 (现代化配置 + 严格模式)
  - [x] 配置 ESLint + Prettier (ESLint 9.x 扁平配置)
  - **验收**: ✅ `pnpm install && pnpm run dev` 成功启动

#### 1.2 Vite 构建配置

- [x] **基础 Vite 配置** (1天) ✅ **已完成**
  - [x] 配置 React + TypeScript 支持 (Vite 7.x + React 19)
  - [x] 设置路径别名 (@/components, @/utils, @/sites)
  - [x] 配置静态资源处理 + GitHub Pages 部署
  - [x] 设置开发服务器 (HMR + 代码分割)
  - **验收**: ✅ 基础 React 应用能正常运行

#### 1.3 Tailwind CSS 集成

- [x] **样式系统搭建** (0.5天) ✅ **已完成**
  - [x] 安装和配置 Tailwind CSS 4.x (TypeScript 配置)
  - [x] 设置主题变量 (明暗模式 + CSS 变量)
  - [x] 创建基础样式类 (卡片、按钮、动画)
  - **验收**: ✅ 样式正常应用，主题切换功能正常

### 🏗️ 2. 站点配置系统

#### 2.1 配置文件架构

- [x] **sites.config.ts 基础实现** (2天) ✅ **已完成**
  - [x] 创建 `.sites/config/` 目录结构 (类型安全架构)
  - [x] 实现 `defineConfig` 函数 (TypeScript 智能提示)
  - [x] 定义基础类型接口 (SiteConfig, NavItem, PluginConfig 等)
  - [x] 实现配置加载器 (动态导入 + 验证)
  - **验收**: ✅ 能成功解析 sites.config.ts 配置

#### 2.2 路由系统

- [x] **React Router 集成** (1天) ✅ **已完成**
  - [x] 配置 React Router v7 (createBrowserRouter)
  - [x] 实现基础路由结构 (8个主要页面 + 动态路由)
  - [x] 设置 GitHub Pages 子路径支持 (BASE_URL)
  - **验收**: ✅ 所有主要路由可正常访问

### 📄 3. 基础 MDX 处理

#### 3.1 MDX 渲染系统

- [x] **MDX 基础集成** (2天) ✅ **已完成**
  - [x] 配置 @mdx-js/rollup 插件
  - [x] 实现基础 MDX 组件提供者
  - [x] 支持 YAML front matter 解析
  - [x] 实现代码块语法高亮
  - **验收**: ✅ 能正确渲染 Markdown 文档

#### 3.2 数学公式支持

- [x] **KaTeX 集成** (1天) ✅ **已完成**
  - [x] 配置 remark-math + rehype-katex
  - [x] 支持行内和块级数学公式
  - [x] 设置数学公式样式
  - **验收**: ✅ 数学公式正确渲染

### 🎨 4. 基础 UI 组件

#### 4.1 布局组件

- [x] **主布局实现** (2天) ✅ **已完成**
  - [x] 创建 Header 组件 (导航 + 主题切换 + 响应式)
  - [x] 创建 Sidebar 组件 (目录导航) - 待 MDX 集成后完善
  - [x] 创建 Footer 组件 (链接 + 技术栈 + 联系信息)
  - [x] 创建 MainLayout 组件 (Outlet 布局系统)
  - **验收**: ✅ 完整的页面布局结构

#### 4.2 导航系统

- [x] **导航组件实现** (1天) ✅ **已完成**
  - [x] 实现主导航菜单 (智能高亮 + 状态管理)
  - [x] 实现面包屑导航 (动态路由解析) - 待 MDX 集成后完善
  - [x] 实现移动端导航适配 (汉堡菜单 + 响应式)
  - **验收**: ✅ 导航功能完整可用

#### 4.3 UI 优化和主题系统

- [x] **侧边栏扁平化优化** (0.5天) ✅ **已完成**
  - [x] 实现单文件目录扁平化逻辑 (移除不必要的嵌套)
  - [x] 优化 index.md/README.md 单文件检测
  - [x] 改进侧边栏导航树生成算法
  - [x] **修复扁平化标题显示错误**: 保持目录名称而非文件标题
  - **验收**: ✅ 单文件目录直接显示为平级项，显示正确的目录名称

- [x] **主题切换组件优化** (0.5天) ✅ **已完成**
  - [x] 移除按钮样式，改为纯图标设计
  - [x] 实现太阳/月亮 SVG 图标替换 emoji
  - [x] 修复暗黑模式类名设置问题
  - [x] 添加悬停效果和无障碍标签
  - [x] 添加调试日志便于问题排查
  - **验收**: ✅ 主题切换功能正常，图标简洁美观

#### 4.4 响应式布局和移动端优化

- [x] **固定头部和布局优化** (0.5天) ✅ **已完成**
  - [x] 实现 Header 固定定位，滚动时保持在顶部
  - [x] 详情页条件性隐藏 Footer 组件
  - [x] 优化主布局的间距处理
  - **验收**: ✅ Header 固定，详情页无 Footer 干扰

- [x] **移动端适配和响应式设计** (1天) ✅ **已完成**
  - [x] 实现移动端可折叠侧边栏
  - [x] 添加移动端菜单按钮和遮罩层
  - [x] 优化面包屑导航的移动端显示
  - [x] 调整内容区域的响应式间距
  - [x] 优化 MDX 内容的移动端排版
  - **验收**: ✅ 移动端体验流畅，所有功能正常

### 📚 5. 内容管理系统

#### 5.1 文档目录解析

- [x] **自动目录生成 + 扁平化导航** (2天) ✅ **已完成**
  - [x] 实现 docs 目录扫描 (useModuleData Hook)
  - [x] 支持数字前缀排序规则 (权重系统)
  - [x] 生成动态卡片导航结构 (ModuleCard 组件)
  - [x] 实现文档路由映射 (点击跳转功能)
  - [x] **扁平化导航优化**: 单文件目录自动扁平化处理
  - [x] **智能路径处理**: 直接指向文档文件而非目录索引
  - [x] **可视化状态指示**: 显示"直接内容"vs"目录内容"标识
  - **验收**: ✅ docs 目录内容能自动生成智能扁平化导航

#### 5.2 页面组件优化

- [x] **动态页面系统实现** (2天) ✅ **已完成**
  - [x] 创建通用 ModulePage 组件 (统一页面架构)
  - [x] 实现动态卡片系统 (ModuleCard + useModuleData)
  - [x] 优化各模块主页 (算法、数据结构、LeetCode、数学、编码)
  - [x] 集成 frontmatter 元数据支持 (标题、描述、难度、标签)
  - [x] 实现响应式卡片布局 (网格系统 + 悬停效果)
  - **验收**: ✅ 所有模块页面显示动态生成的内容卡片

### 🚀 6. 静态部署配置

#### 6.1 构建优化

- [x] **生产构建配置** (1天) ✅ **已完成**
  - [x] 配置生产环境构建选项 (Vite + TypeScript)
  - [x] 设置代码分割策略 (按路由和vendor分包)
  - [x] 配置资源压缩和优化 (Vite默认优化)
  - [x] 设置正确的base URL (/learn-algorithm/)
  - **验收**: ✅ `pnpm run build` 生成正确的静态文件

#### 6.2 GitHub Pages 部署

- [x] **CI/CD 配置** (1天) ✅ **已完成**
  - [x] 创建 GitHub Actions 工作流 (.github/workflows/deploy.yml)
  - [x] 配置自动构建和部署 (pnpm + Node.js 20)
  - [x] 设置 CNAME 和 .nojekyll 文件 (已存在于public目录)
  - [x] 配置 pnpm 缓存和依赖安装优化
  - [x] 设置正确的环境变量和权限
  - **验收**: ✅ 能通过 <http://blog.zenheart.site/learn-algorithm> 访问站点

**P0 阶段验收标准**:

- ✅ 站点能正常部署到 GitHub Pages (CI/CD 已配置)
- ✅ 基础导航和页面浏览功能正常
- ✅ Markdown 文档能正确渲染 (MDX 已集成)
- ✅ 数学公式显示正常 (KaTeX 已集成)
- ✅ 响应式布局完全可用 (包含移动端适配)

**已完成项目**:

- ✅ 现代化技术栈 (React 19 + Vite 7 + TypeScript 5.5 + Tailwind 4.x)
- ✅ 完整路由系统 (8个页面 + 动态路由 + GitHub Pages 支持)
- ✅ 响应式布局 (Header/Footer/MainLayout + 移动端适配)
- ✅ 主题系统 (明暗模式切换 + CSS 变量)
- ✅ 类型安全配置 (sites.config.ts + 智能提示)

---

## 🎮 P1 - 交互功能实现 (Beta 版本)

> **目标**: 实现代码编辑和基础可视化功能，提供核心的交互体验

### 💻 7. 代码编辑器集成

#### 7.1 CodeMirror 基础集成

- [ ] **编辑器组件实现** (3天)
  - [ ] 集成 CodeMirror 6
  - [ ] 配置多语言支持 (JavaScript, Python, Java)
  - [ ] 实现语法高亮和错误提示
  - [ ] 添加基础编辑功能 (折叠、搜索等)
  - **验收**: 代码编辑器功能完整可用

#### 7.2 主题和界面优化

- [ ] **编辑器主题** (1天)
  - [ ] 适配明暗主题
  - [ ] 配置字体和布局
  - [ ] 实现响应式适配
  - **验收**: 编辑器外观和交互体验良好

### ⚡ 8. Deno WASM 集成

#### 8.1 WASM 运行时

- [ ] **Deno WASM 基础集成** (4天)
  - [ ] 集成 @deno/wasm 包
  - [ ] 实现 Web Worker 隔离
  - [ ] 配置沙箱环境和安全限制
  - [ ] 实现代码执行和结果返回
  - **验收**: 能安全执行 JavaScript 代码并显示结果

#### 8.2 错误处理和用户反馈

- [ ] **错误处理系统** (2天)
  - [ ] 实现语法错误检测和提示
  - [ ] 添加运行时错误捕获
  - [ ] 设置执行超时保护
  - [ ] 实现用户友好的错误显示
  - **验收**: 各种错误情况都有适当的用户反馈

### 📊 9. 基础数据结构可视化

#### 9.1 AntV G2 集成

- [ ] **可视化引擎集成** (2天)
  - [ ] 集成 AntV G2 和相关依赖
  - [ ] 创建基础可视化组件架构
  - [ ] 实现 Canvas 渲染基础功能
  - **验收**: AntV G2 能正常渲染简单图表

#### 9.2 基础数据结构实现

- [ ] **核心数据结构可视化** (5天)
  - [ ] 实现数组可视化 (排序算法演示)
  - [ ] 实现二叉树可视化 (插入、删除、遍历)
  - [ ] 实现基础图结构可视化 (BFS、DFS)
  - [ ] 添加动画控制 (播放、暂停、步进)
  - **验收**: 3种基础数据结构能正确可视化并支持交互

### 🔧 10. Playground fenced 语法处理

#### 10.1 MDX 处理器扩展

- [ ] **fenced 语法解析器** (3天)
  - [ ] 识别并解析 fenced code block：```playground
  - [ ] 支持 schema：file | dir | files | entry | template | options
  - [ ] options.editorHeight: number（单位 px，默认 300）
  - [ ] 路径解析基于当前 Markdown 文件目录，禁止绝对路径与远程 URL
  - [ ] 目录扫描递归并忽略常见目录：node_modules、dist、build、.git 等
  - [ ] 多文件 files 对象语法：支持 hidden、active 配置
  - [ ] 生成组件 props 并在文档位置动态注入 Playground 组件
  - **验收**: 能根据 fenced 配置正确渲染组件，并按 options 行为工作

#### 10.2 多模板支持

- [ ] **模板系统** (2天)
  - [ ] 实现 demo 模式 (只读展示)
  - [ ] 实现 exercise 模式 (可编辑练习)
  - [ ] 实现 test 模式 (测试用例验证)
  - [ ] 支持 template 推断与显式选择（基于文件后缀/默认规则）
  - **验收**: 3种模板模式正常工作，template 推断与覆盖生效

**P1 阶段验收标准**:

- ✅ 代码编辑器功能完整，体验良好
- ✅ 能安全执行代码并显示结果
- ✅ 基础数据结构可视化正常工作
- ✅ playground fenced 语法能正确处理和显示

---

## 🎨 P2 - 完整功能实现 (RC 版本)

> **目标**: 实现完整的功能集，包括 DSL 解析、编码可视化和 Playground 页面

### 🔤 11. DSL 解析器实现

#### 11.1 BNF 语法解析器

- [ ] **DSL 解析引擎** (4天)
  - [ ] 实现 BNF 语法定义
  - [ ] 创建词法分析器 (Tokenizer)
  - [ ] 实现语法分析器 (Parser)
  - [ ] 创建抽象语法树 (AST)
  - **验收**: 能正确解析简洁的 DSL 语法

#### 11.2 G2 配置生成器

- [ ] **AST 到 G2 转换** (3天)
  - [ ] 实现 AST 到 AntV G2 配置的映射
  - [ ] 支持交互选项和动画配置
  - [ ] 实现错误验证和用户提示
  - **验收**: DSL 代码能正确转换为可视化图表

### 🔐 12. 编码可视化系统

#### 12.1 基础编码算法

- [ ] **编码可视化组件** (4天)
  - [ ] 实现 UTF-8 编码可视化
  - [ ] 实现 ASCII 编码转换
  - [ ] 实现 Base64 编码演示
  - [ ] 添加逐步演示和交互功能
  - **验收**: 基础编码算法能正确可视化

#### 12.2 复杂编码算法

- [ ] **高级编码可视化** (3天)
  - [ ] 实现霍夫曼编码树形可视化
  - [ ] 支持用户输入实时编码
  - [ ] 添加压缩率显示和统计
  - **验收**: 复杂编码算法能正确演示

### 🧪 13. Playground 页面

#### 13.1 页面架构

- [ ] **Playground 页面实现** (3天)
  - [ ] 创建独立的 Playground 页面
  - [ ] 实现模板类型切换器
  - [ ] 添加示例选择器
  - [ ] 实现配置参数面板
  - **验收**: Playground 页面功能完整

#### 13.2 默认示例和分享

- [ ] **示例系统** (2天)
  - [ ] 添加各种类型的默认示例
  - [ ] 实现代码和配置的导出功能
  - [ ] 添加分享链接生成
  - **验收**: 能方便地测试和分享不同的示例

### 📱 14. 完整数据结构支持

#### 14.1 线性结构

- [ ] **线性数据结构** (3天)
  - [ ] 实现链表可视化 (单链表、双链表)
  - [ ] 实现栈和队列可视化
  - [ ] 添加操作动画和状态显示
  - **验收**: 线性数据结构可视化完整

#### 14.2 复杂结构

- [ ] **复杂数据结构** (4天)
  - [ ] 实现哈希表可视化 (冲突处理)
  - [ ] 实现图算法可视化 (Dijkstra, MST)
  - [ ] 添加高级交互功能
  - **验收**: 所有数据结构类型都支持可视化

**P2 阶段验收标准**:

- ✅ DSL 语法能正确解析和渲染
- ✅ 编码可视化功能完整
- ✅ Playground 页面体验良好
- ✅ 所有数据结构类型都支持可视化

---

## 🚀 P3 - 性能优化和完善 (正式版本)

> **目标**: 优化性能，完善移动端体验，准备生产环境发布

### ⚡ 15. 性能优化

#### 15.1 加载性能优化

- [ ] **资源加载优化** (2天)
  - [ ] 实现代码分割和懒加载
  - [ ] 优化图像和字体加载
  - [ ] 实现 Service Worker 缓存
  - [ ] 添加加载状态指示器
  - **验收**: 首屏加载时间 < 2秒

#### 15.2 运行时性能优化

- [ ] **渲染性能优化** (2天)
  - [ ] 优化 React 组件渲染
  - [ ] 实现可视化组件的内存管理
  - [ ] 优化大数据集的处理
  - **验收**: 可视化渲染时间 < 500ms

### 📱 16. 移动端适配

#### 16.1 响应式优化

- [ ] **移动端界面优化** (2天)
  - [ ] 优化移动端布局和字体大小
  - [ ] 实现触摸手势支持
  - [ ] 添加移动端特定的交互模式
  - **验收**: 移动端体验良好

#### 16.2 移动端特定功能

- [ ] **触摸交互** (1天)
  - [ ] 实现可视化图表的触摸操作
  - [ ] 优化代码编辑器的移动端体验
  - [ ] 添加虚拟键盘适配
  - **验收**: 移动端所有功能正常使用

### 🔍 17. 质量保证

#### 17.1 测试覆盖

- [ ] **自动化测试** (2天)
  - [ ] 添加单元测试 (核心组件)
  - [ ] 添加集成测试 (关键流程)
  - [ ] 配置 CI/CD 中的测试运行
  - **验收**: 测试覆盖率 > 80%

#### 17.2 错误监控和分析

- [ ] **监控系统** (1天)
  - [ ] 添加错误边界和错误上报
  - [ ] 实现性能监控指标
  - [ ] 配置用户行为分析
  - **验收**: 有完整的错误监控和性能追踪

### 📚 18. 文档和部署

#### 18.1 文档完善

- [ ] **开发文档** (1天)
  - [ ] 完善 README 文档
  - [ ] 添加开发指南和部署说明
  - [ ] 创建贡献者指南
  - **验收**: 文档完整，新开发者能快速上手

#### 18.2 生产环境优化

- [ ] **部署优化** (1天)
  - [ ] 配置 CDN 加速
  - [ ] 实现 SEO 优化
  - [ ] 添加站点地图和元数据
  - **验收**: 生产环境稳定运行

**P3 阶段验收标准**:

- ✅ 性能指标达到预期 (首屏 < 2s, 可视化 < 500ms)
- ✅ 移动端体验优秀
- ✅ 测试覆盖率达标
- ✅ 生产环境稳定

---

## 📊 工作量估算

| 优先级 | 任务数量 | 预估工时 | 建议团队规模 | 完成时间 | 当前状态 |
|--------|----------|----------|--------------|----------|----------|
| **P0** | 18 个任务 | 80 工时 | 2-3 人 | 4 周 | 🟡 **50%** (9/18 完成) |
| **P1** | 12 个任务 | 120 工时 | 3-4 人 | 6 周 | ⚪ **0%** |
| **P2** | 14 个任务 | 100 工时 | 2-3 人 | 4 周 | ⚪ **0%** |
| **P3** | 10 个任务 | 40 工时 | 2 人 | 2 周 | ⚪ **0%** |
| **总计** | **54 个任务** | **340 工时** | **2-4 人** | **16 周** | 🟡 **17%** 整体进度 |

## 🚧 风险评估和缓解策略

### 高风险项

1. **Deno WASM 集成复杂度**
   - 风险: 技术复杂，调试困难
   - 缓解: 在 P1 阶段优先验证核心功能

2. **DSL 解析器开发工作量**
   - 风险: 自研解析器工作量大
   - 缓解: 考虑使用现有解析器库，如 PEG.js

3. **性能指标达成难度**
   - 风险: 复杂交互可能影响性能
   - 缓解: 在每个阶段都进行性能测试和优化

### 中风险项

1. **移动端适配复杂度**
2. **可视化动画流畅度**
3. **多语言代码执行支持**

## 📝 开发规范

每个任务完成后需要：

- ✅ 代码 Review (参考 [Cursor Rules](./.cursor/rules/))
- ✅ 单元测试 (核心功能)
- ✅ 功能验收 (按照验收标准)
- ✅ 文档更新 (如需要)

## 🔄 迭代计划

每个优先级阶段结束后进行：

1. **演示和反馈收集**
2. **性能测试和优化**
3. **用户体验评估**
4. **下一阶段计划调整**
