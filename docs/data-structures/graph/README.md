# 图

## 知识点

- 图的定义
  - 现实意义
    - **实体** 用来表示现实世界中的物体或抽象概念
    - **关系** 用来表示实体之间的关系
    - 图标表示**实体**间的**关系**，例如
      - 道路网络
      - 万维网
      - 社交网络
      - 优先级约束
  - 数学表征
    - **V** 顶点集合， 代表实体的抽象
      - **n = |V|** 表示图的顶点个数
    - **E** 边集合，代表关系的抽象
      - **m = |E|** 表示图的边个数
      - **(v,w)** 表示一条边，代表顶点 v 和顶点 w 之间存在连接
    - **G = (V, E)** 图具有顶点集合边集， 表示实体间的关系结构
- 图的分类
  - 实体关系是否有方向
    - 无向图
      - **(v, w)** 的边无方向，只表示顶点 v 和 w 之间具有连接关系
    - 有向图
      - **(v,w)** 有方向，表示从 v 到 w 有连接关系
  - 顶点和边的数量
    - **稀疏图** 顶点和边的数量大致为线性关系
    - **稠密图** 顶点和边的数量大致为非线性关系
- 图的表示方法
  - **邻接列表**
    - 1. 存储图的顶点集合，表示集合 **V** 的元素 node
    - 2. 存储图的边集, 表示集合 **E** 的元素 edge，**(node1,node2)**, `对于有向图，(node1,node2)表示node1指向node2**`
    - 3. 顶点 node 中存储指向它的边 edge 的指针
    - 4. 边 edge 中存储指向它的顶点 node 的指针
  - **邻接矩阵**
    - 假设 顶点数 |V| = n， 用 n x n 的矩阵表示图
    - 矩阵中，如果两个顶点之间存在边，则对应位置的值为 1，否则为 0，例如 (i,j) 表示 i 指向 j 存在连接关系，存储的值除了 0 和 1 之外，还可以是任意值
      - **权重**，(i,j) 值为 10，表示 i 指向 j 存在连接关系，权重为 10
      - **边的连接数量**，(i,j) 值为 2，表示 i 指向 j 存在 2 条连接关系
  - 选用何种表示策略的依据
    - 1. 图的稀疏程度， 稀疏图适合使用邻接列表，稠密图适合使用邻接矩阵
- 图的操作

  - 图的搜索，连通性检查

    - **问题定义**
      - **输入** 无向图或有向图 G = (V, E)， 起始顶点 s ∈ V
      - **输出** 从 s 可以到达的 V 的子集 S
    - 通用算法,顶点/边 筛选法
      - **伪代码**
        ```
        把 s 标记为已探索，所有其他顶点标记为未探索
        while 存在一条边 (v,w) ∈ E，且 v 以探索，w 未探索
          do
            选择一条边 (v,w)
            w 标记为已探索
        ```
    - BFS 按照邻接顶点逐层搜索

      ```
      把 s 标记为已探索，所有其他节点标记为未探索
      Q := 一个队列数据，用 s 初始化
      while Q 不为空 do
        从 Q 的 头部删除一个顶点 ，称为 v
        for 搜索所有属于 v 的邻接顶点 w do
          if w 为未探索 then
            把 w 标记为已探索，加入 Q
      ```

      - bfs 查找最短路径

        - **问题定义**

          - **输入** 无向图或有向图 G = (V, E)， 起始顶点 s ∈ V
          - **输出** 每个顶点 v 到 s 的最短路径，即从 s 到 v 的路径
          - **伪代码**
            ```math
              \text{把 s 标记为已探索，所有其他顶点标记为未探索} \\
              - [x] 对于每个顶点  {v \neq s} , \\
              while 存在一条边 (v,w) \in E, 且  v  以探索, w 未探索 \\
              \quad \text{do} \\
              \quad \quad \text{选择一条边 } (v,w) \\
              \quad \quad w \text{ 标记为已探索}
            ```

    - DFS 按照邻接顶点向下搜索

      ```
        伪代码描述

      ```

      - 队列模式搜索
      - 递归模式搜索

  - 图的拓扑排序

    - **现实意义** 任务优先级约束，举例
      - 课程选择
      - 依赖关系
    - **数学定义**
      - G=(V,E) 是有向无环图，,G 的拓扑顺序就是为每个顶点 v ∈ V 的 f(v) 分配一个不同的数值，是的对于每条有向边，(v,w) ∈ E, 均满足 f(v) < f(w)
      - 限定范围 DAG
      - 一定存在拓扑排序
      - 一定存在起始点
      - sink vertex 槽顶点
    - **算法**

      ```
        初始化: 把所有顶点标记为未探索
        curLabel := |V|
        for each v ∈ V do
          if v 未探索 then
            DFS-Topo(G, v)

        DFS-Topo(G, V)
          s 标记为已探索
          for each (s,v)  do
            if v 未探索 then
              DFS-Topo(G, v)
          f(s) := curLabel
          curLabel := curLabel - 1
      ```

    - 其他图的环检查
      - Kahn 算法

- Dijkstra 最短路径算法

  - 现实意义
    - 道路网中的最短路程
  - **数学抽象**
    - **输入** 有向图 G = (V, E)， 起始顶点 s ∈ V， e ∈ E 的长度 len(e) 均为非负值
    - **输出** 从每个顶点 v ∈ V 到 s 的最短路径 dist(s,v)
  - **解决方案**

    ```
    初始化:
       X := { s }
       len(s) = 0, len(v) := infinity for all v ∈ V v 不等于 s
    伪代码描述:
      while 存在一条边 (v,w) ∈ E 使得 v ∈ X ,w ∉ X do
        (v*, w*) := Min(len(v) + len(v,w))
        w* 加入 X
          len(w*) := len(v*) + l(v*, w*)

    ```
